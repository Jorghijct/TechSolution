<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Desarrollador" content="Jorghi Cote" />
    <title>Lista de Productos - TechSolutions</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        max-width: 1000px;
        margin: 20px auto;
        padding: 20px;
      }
      table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
      }
      th,
      td {
        border: 1px solid #ddd;
        padding: 12px;
        text-align: left;
      }
      th {
        background-color: #2196f3;
        color: white;
      }
      .btn {
        background-color: #4caf50;
        color: white;
        padding: 10px 20px;
        text-decoration: none;
        border-radius: 4px;
        display: inline-block;
      }
      .developer {
        text-align: center;
        margin-top: 30px;
        font-style: italic;
      }
      .success {
        background-color: #d4edda;
        color: #155724;
        padding: 10px;
        border-radius: 4px;
        margin: 10px 0;
      }
      .error {
        background-color: #f8d7da;
        color: #721c24;
        padding: 10px;
        border-radius: 4px;
        margin: 10px 0;
      }
      .product-img {
        max-width: 80px;
        max-height: 80px;
      }
    </style>
  </head>
  <body>
    <h2>Lista de Productos - TechSolutions</h2>

    <?php if (isset($_GET['success'])): ?>
    <div class="success">Producto guardado exitosamente!</div>
    <?php endif; ?>

    <?php if (isset($_GET['error'])): ?>
    <div class="error">Error al guardar el producto!</div>
    <?php endif; ?>

    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Nombre</th>
          <th>Imagen</th>
          <th>Descripción</th>
          <th>Precio</th>
          <th>Categoría ID</th>
        </tr>
      </thead>
      <tbody>
        <?php foreach ($productos as $producto): ?>
        <tr>
          <td><?php echo $producto['id']; ?></td>
          <td><?php echo htmlspecialchars($producto['nombre']); ?></td>
          <td>
            <?php if ($producto['imagen']): ?>
            <img
              src="<?php echo htmlspecialchars($producto['imagen']); ?>"
              alt="Producto"
              class="product-img"
            />
            <?php else: ?>
            Sin imagen
            <?php endif; ?>
          </td>
          <td><?php echo htmlspecialchars($producto['descripcion']); ?></td>
          <td>$<?php echo number_format($producto['precio'], 2); ?></td>
          <td><?php echo $producto['categoria_id']; ?></td>
        </tr>
        <?php endforeach; ?>
      </tbody>
    </table>

    <a href="productos.php" class="btn">Agregar Nuevo Producto</a>

    <div class="developer">Desarrollado por: Jorghi Cote</div>
  </body>
</html>
